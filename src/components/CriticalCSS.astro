---
// Critical CSS component for above-the-fold content
---
<style is:inline>
  /* Critical CSS for above-the-fold content */
  :root {
    font-family: var(--font-inter), ui-sans-serif, system-ui, sans-serif;
    /* Optimize font rendering for mobile */
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  @supports (font-variation-settings: normal) {
    :root {
      font-family: var(--font-inter-variable), ui-sans-serif, system-ui, sans-serif;
      font-optical-sizing: auto;
    }
  }
  
  /* Prevent layout shift */
  * {
    box-sizing: border-box;
  }
  
  body {
    margin: 0;
    padding: 0;
    line-height: 1.6;
    min-height: 100vh;
    overflow-x: hidden;
    /* Mobile performance optimizations */
    -webkit-overflow-scrolling: touch;
    /* Better scroll behavior */
    scroll-behavior: smooth;
    /* Remove contain property that can cause scroll issues */
  }
  
  /* Layout stability - FIX CLS */
  img, svg, video, canvas, iframe {
    display: block;
    max-width: 100%;
    height: auto;
    /* Prevent layout shift for images - CRITICAL FIX */
    width: auto;
    min-height: 1px; /* Prevent collapse */
    /* GPU acceleration for images */
    transform: translateZ(0);
    backface-visibility: hidden;
  }
  
  /* Mobile-first image loading - FIX LCP */
  img {
    content-visibility: auto;
    contain-intrinsic-size: 300px 200px;
    /* Reserve space immediately */
    background-color: #f0f0f0;
    background-image: linear-gradient(45deg, #f0f0f0 25%, transparent 25%), 
                      linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), 
                      linear-gradient(45deg, transparent 75%, #f0f0f0 75%), 
                      linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
    background-size: 20px 20px;
    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
    /* Force immediate sizing for LCP */
    width: auto !important;
    height: auto !important;
    /* Fix for missing images */
    aspect-ratio: attr(width) / attr(height);
  }
  
  /* Avatar specific fix - CRITICAL for LCP */
  .avatar-container, [class*="avatar"] {
    width: 52px;
    height: 52px;
    flex-shrink: 0;
    contain: layout style paint;
    /* Force immediate render */
    will-change: auto;
    background-color: #f0f0f0; /* Placeholder background */
  }
  
  /* Author container optimization - CRITICAL for LCP */
  .author-container, [class*="author"] {
    contain: layout style paint;
    will-change: auto;
    /* Reserve space for largest author container */
    min-height: 92px;
  }
  
  /* Fix for larger avatar in author component */
  .author-container .relative {
    width: 92px !important;
    height: 92px !important;
    contain: layout style paint;
    background-color: #f0f0f0;
  }
  
  /* Container queries for responsive images */
  @container (max-width: 768px) {
    img {
      contain-intrinsic-size: 150px 100px;
    }
  }
  
  /* Prevent font swap layout shift */
  @font-face {
    font-family: 'Inter';
    font-display: swap;
    src: local('Inter');
  }
  
  /* Font loading states to prevent CLS */
  :root:not(.fonts-loaded) {
    /* Use system font until custom font loads */
    font-family: ui-sans-serif, system-ui, sans-serif !important;
  }
  
  .fonts-loaded {
    font-family: var(--font-inter), ui-sans-serif, system-ui, sans-serif !important;
  }
  
  .bg-background { background-color: var(--palette-50, #fafafa); }
  .text-foreground { color: var(--palette-600, #737373); }
  .pb-12 { padding-bottom: 3rem; }
  .pt-24 { padding-top: 6rem; }
  
  /* Skip link styles */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  
  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
  
  /* Dark mode critical styles */
  .dark {
    --palette-50: #0a0a0a;
    --palette-600: #a3a3a3;
  }
  
  .dark .bg-background { background-color: var(--palette-50); }
  .dark .text-foreground { color: var(--palette-600); }
  
  /* Loading states to prevent layout shift */
  .loading-placeholder {
    background: linear-gradient(90deg, #f0f0f0 25%, transparent 37%, #f0f0f0 63%);
    background-size: 400% 100%;
    animation: loading 1.4s ease infinite;
  }
  
  @keyframes loading {
    0% { background-position: 100% 50%; }
    100% { background-position: -100% 50%; }
  }
  
  /* Focus styles for accessibility */
  *:focus {
    outline: 2px solid #0066cc;
    outline-offset: 2px;
  }
  
  *:focus:not(:focus-visible) {
    outline: none;
  }
  
  *:focus-visible {
    outline: 2px solid #0066cc;
    outline-offset: 2px;
  }
  
  /* Mobile-specific optimizations */
  @media (max-width: 768px) {
    body {
      font-size: 16px; /* Prevent zoom on input focus */
    }
    
    /* Optimize tap targets for mobile */
    button, a, input, select, textarea {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* CRITICAL: Disable ALL animations on mobile for LCP */
    *, *::before, *::after {
      animation-duration: 0s !important;
      animation-delay: 0s !important;
      transition-duration: 0s !important;
      transition-delay: 0s !important;
    }
    
    /* Content visibility for performance */
    main {
      content-visibility: auto;
      contain: layout style paint;
    }
    
    /* Fix layout containers */
    .container {
      contain: layout style;
    }
    
    /* Optimize text rendering */
    * {
      text-rendering: optimizeSpeed;
      -webkit-font-smoothing: subpixel-antialiased;
    }
  }
  
  /* Reduce complexity for low-end devices */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
</style>
